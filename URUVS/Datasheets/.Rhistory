select(contains(NAME1) | contains(NAME2))
View(NAME1_List)
NAME1_LiST$paste0("MAXN_", NEWNAME) <- pmax(NAME1_List$paste0("MAXN_", NAME1), NAME1_List$paste0("MAXN_", NAME2))
NAME1_LiST$(paste0("MAXN_", NEWNAME)) <- pmax(NAME1_List$(paste0("MAXN_", NAME1)), NAME1_List$(paste0("MAXN_", NAME2)))
install.packages("stringr")
library(stringr)
?str_to_title()
NAME1_LiST$str_to_title(paste0("MAXN_", NEWNAME)) <- 0
str_to_title(paste0("MAXN_", NEWNAME))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, dev="cairo_pdf")
# Temporal Trends
# Shannon’s diversity Index
# Principal Component Analysis
# Community Structures
library(plyr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(ggpubr)
#Make a MasterDatasheet with all months data
# CHANGE EVERY MONTH
completedData <- c("02.2024", "03.2024", "04.2024", "05.2024")
masterData <- data.frame(read.csv("URUV/RecordingData_02.2024.csv"))
for(i in 2:length(completedData)){
addedData <- data.frame(read.csv(paste0("URUV/RecordingData_",completedData[i],".csv")))
#All NA maxN's changed to 0s
for(k in 1:ncol(addedData)){
if(grepl("MAXN", colnames(addedData[k]))){
addedData[k][is.na(addedData[k])] <- 0
}}
masterData <- rbind.fill(masterData, addedData)
}
masterData <- masterData %>%
filter( F1_TIME != "") %>%
filter(!is.na(F1_TIME))
#Need to chage NAs again
for(j in 1:ncol(masterData)){
if(grepl("MAXN", colnames(masterData[j]))){
masterData[j][is.na(masterData[j])] <- 0
}}
#View(masterData)
write.csv(masterData, "Master_RecordingData.csv")
URUV_data <- masterData
NAME1_LiST$!!paste0("MAXN_", NEWNAME) <- 0
colnames(NAME1_List)
MAXN_List <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN"))
View(MAXN_List)
MAXN_List <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
mutate(MAXN = max())
MAXN_List
view(MAXN_List)
View(MAXN_List)
MAXN_List <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
mutate(MAXN = max(MAXN_List[,1:2]))
View(MAXN_List)
MAXN_List <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
rowwise() %>%
mutate(MAXN = max(MAXN_List[,1:2]))
View(MAXN_List)
View(Maxn_List)
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
rowwise() %>%
mutate(MAXN = max(MAXN_Compare[,1:2]))
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
rowwise() %>%
mutate(MAXN = max(MAXN_Compare[,1:2]))
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
rowwise() %>%
mutate(MAXN = max(.[,1:2]))
View(MAXN_Compare)
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) %>%
select(contains("MAXN")) %>%
rowwise() %>%
mutate(MAXN = max(.[1:2]))
View(MAXN_Compare)
MAXN_Compare$as.name(paste0("MAXN_", NEWNAME)) <- 0
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) #%>%
MAXN_Compare$as.name(paste0("MAXN_", NEWNAME)) <- 0
MAXN_Compare$noquote(paste0("MAXN_", NEWNAME)) <- 0
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2)) #%>%
noquote(paste0("MAXN_", NEWNAME))
as.name(paste0("MAXN_", NEWNAME))
MAXN_Compare$as.name(paste0("MAXN_", NEWNAME)) <- 0
MAXN_Compare$as.name(paste0("MAXN_", NEWNAME)) <- 0
View(MAXN_Compare)
as.name(paste0("MAXN_", NEWNAME))
COLNAME <- as.name(paste0("MAXN_", NEWNAME))
MAXN_Compare$COLNAME <- 0
MAXN_Compare
MAXN_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
#MAKE VARIABLES FOR THE NEW COLUMN NAMES TO FILTER
MAXNCOLNAME <- as.name(paste0("MAXN_", NEWNAME))
MAXN_NAME1 <- as.name(paste0("MAXN_", NAME1))
MAXN_NAME2 <- as.name(paste0("MAXN_", NAME2))
MAXN_Compare$MAXNCOLNAME <- pmax(MAXN_Compare$MAXN_NAME1, MAXN_Compare$MAXN_NAME2)
pmax(MAXN_Compare$MAXN_NAME1, MAXN_Compare$MAXN_NAME2)
MAXN_Compare$MAXN_NAME1
View(MAXN_Compare)
#MAKE VARIABLES FOR THE NEW COLUMN NAMES TO FILTER
MAXNCOLNAME <- as.name(paste0("MAXN_", NEWNAME))
MAXN_NAME1 <- as.name(paste0("MAXN_", NAME1))
MAXN_NAME2 <- as.name(paste0("MAXN_", NAME2))
MAXN_Compare$MAXN_NAME1
MAXN_NAME1
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
MAXN_cols
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
df_price$MAXN_NEW <- pmax(SPECIES_Compare[, MAXN_cols])
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[, MAXN_cols])
View(SPECIES_Compare)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, dev="cairo_pdf")
# Temporal Trends
# Shannon’s diversity Index
# Principal Component Analysis
# Community Structures
library(plyr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(ggpubr)
#Make a MasterDatasheet with all months data
# CHANGE EVERY MONTH
completedData <- c("02.2024", "03.2024", "04.2024", "05.2024")
masterData <- data.frame(read.csv("URUV/RecordingData_02.2024.csv"))
for(i in 2:length(completedData)){
addedData <- data.frame(read.csv(paste0("URUV/RecordingData_",completedData[i],".csv")))
#All NA maxN's changed to 0s
for(k in 1:ncol(addedData)){
if(grepl("MAXN", colnames(addedData[k]))){
addedData[k][is.na(addedData[k])] <- 0
}}
masterData <- rbind.fill(masterData, addedData)
}
masterData <- masterData %>%
filter( F1_TIME != "") %>%
filter(!is.na(F1_TIME))
#Need to chage NAs again
for(j in 1:ncol(masterData)){
if(grepl("MAXN", colnames(masterData[j]))){
masterData[j][is.na(masterData[j])] <- 0
}}
#View(masterData)
write.csv(masterData, "Master_RecordingData.csv")
URUV_data <- masterData
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[, MAXN_cols])
MAXN_cols
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols])
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols])
View(SPECIES_Compare)
MAXN_cols[1]
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
View(SPECIES_Compare)
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
TIME_1ST_cols <- grep("TIME_1ST", names(SPECIES_Compare), value = TRUE)
T1_cols <- grep("T1", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
SPECIES_Compare$TIME_1ST_NEW <- pmin(SPECIES_Compare[TIME_1ST_cols[1]], SPECIES_Compare[TIME_1ST_cols[2]])
SPECIES_Compare$T1_NEW <- pmin(SPECIES_Compare[T1_cols[1]], SPECIES_Compare[T1_cols[2]])
View(SPECIES_Compare)
pmin(SPECIES_Compare$TIME_1STFISHF, SPECIES_Compare$TIME_1STGUPPYC)
class(SPECIES_Compare$TIME_1STFISHF)
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
View(SPECIES_Compare)
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
# Remove these columns from original dataset
URUV_data[,!names(URUV_data) %in% colname(SPECIES_Compare)]
# Remove these columns from original dataset
URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
colnames(SPECIES_Compare[7]) <- paste0("MAXN_", NEWNAME)
View(SPECIES_Compare)
vIEW(URUV_data)
View(URUV_data)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, dev="cairo_pdf")
# Temporal Trends
# Shannon’s diversity Index
# Principal Component Analysis
# Community Structures
library(plyr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(ggpubr)
#Make a MasterDatasheet with all months data
# CHANGE EVERY MONTH
completedData <- c("02.2024", "03.2024", "04.2024", "05.2024")
masterData <- data.frame(read.csv("URUV/RecordingData_02.2024.csv"))
for(i in 2:length(completedData)){
addedData <- data.frame(read.csv(paste0("URUV/RecordingData_",completedData[i],".csv")))
#All NA maxN's changed to 0s
for(k in 1:ncol(addedData)){
if(grepl("MAXN", colnames(addedData[k]))){
addedData[k][is.na(addedData[k])] <- 0
}}
masterData <- rbind.fill(masterData, addedData)
}
masterData <- masterData %>%
filter( F1_TIME != "") %>%
filter(!is.na(F1_TIME))
#Need to chage NAs again
for(j in 1:ncol(masterData)){
if(grepl("MAXN", colnames(masterData[j]))){
masterData[j][is.na(masterData[j])] <- 0
}}
#View(masterData)
write.csv(masterData, "Master_RecordingData.csv")
URUV_data <- masterData
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, dev="cairo_pdf")
# Temporal Trends
# Shannon’s diversity Index
# Principal Component Analysis
# Community Structures
library(plyr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(ggpubr)
#Make a MasterDatasheet with all months data
# CHANGE EVERY MONTH
completedData <- c("02.2024", "03.2024", "04.2024", "05.2024")
masterData <- data.frame(read.csv("URUV/RecordingData_02.2024.csv"))
for(i in 2:length(completedData)){
addedData <- data.frame(read.csv(paste0("URUV/RecordingData_",completedData[i],".csv")))
#All NA maxN's changed to 0s
for(k in 1:ncol(addedData)){
if(grepl("MAXN", colnames(addedData[k]))){
addedData[k][is.na(addedData[k])] <- 0
}}
masterData <- rbind.fill(masterData, addedData)
}
masterData <- masterData %>%
filter( F1_TIME != "") %>%
filter(!is.na(F1_TIME))
#Need to chage NAs again
for(j in 1:ncol(masterData)){
if(grepl("MAXN", colnames(masterData[j]))){
masterData[j][is.na(masterData[j])] <- 0
}}
#View(masterData)
write.csv(masterData, "Master_RecordingData.csv")
URUV_data <- masterData
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
MAXN_cols
View(SPECIES_Compare)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
colnames(SPECIES_Compare[7]) <- paste0("MAXN_", NEWNAME)
View(SPECIES_Compare)
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare$MAXN_NEW <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
View(SPECIES_Compare)
SPECIES_Compare <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
View(SPECIES_Compare)
colnames(SPECIES_Compare) <- paste0("MAXN_", NEWNAME)
View(SPECIES_Compare)
# Remove these columns from original dataset
NEW_URUV <- URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
# Remove these columns from original dataset
NEW_URUV <- URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
View(NEW_URUV)
colnames(NEW_URUV)
NEW_URUV <- append(NEW_URUV, SPECIES_Compare)
colnames(NEW_URUV)
?append
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
# Remove these columns from original dataset
NEW_URUV <- URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
colnames(SPECIES_Compare) <- paste0("MAXN_", NEWNAME)
NEW_URUV <- append(NEW_URUV, SPECIES_Compare)
colnames(NEW_URUV)
SPECIES_Compare
NEW_URUV <- cbind(NEW_URUV, SPECIES_Compare)
colnames(NEW_URUV)
#combineSpecies <- function(NAME1, NAME2, NEWNAME) {
NAME1 <- "FISHF"
NAME2 <- "GUPPYC"
NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
# Remove these columns from original dataset
NEW_URUV <- URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
SPECIES_Compare <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
colnames(SPECIES_Compare) <- paste0("MAXN_", NEWNAME)
NEW_URUV <- cbind(NEW_URUV, SPECIES_Compare)
View(SPECIES_Compare)
colnames(NEW_URUV)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, dev="cairo_pdf")
# Temporal Trends
# Shannon’s diversity Index
# Principal Component Analysis
# Community Structures
library(plyr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(ggpubr)
#Make a MasterDatasheet with all months data
# CHANGE EVERY MONTH
completedData <- c("02.2024", "03.2024", "04.2024", "05.2024")
masterData <- data.frame(read.csv("URUV/RecordingData_02.2024.csv"))
for(i in 2:length(completedData)){
addedData <- data.frame(read.csv(paste0("URUV/RecordingData_",completedData[i],".csv")))
#All NA maxN's changed to 0s
for(k in 1:ncol(addedData)){
if(grepl("MAXN", colnames(addedData[k]))){
addedData[k][is.na(addedData[k])] <- 0
}}
masterData <- rbind.fill(masterData, addedData)
}
masterData <- masterData %>%
filter( F1_TIME != "") %>%
filter(!is.na(F1_TIME))
#Need to chage NAs again
for(j in 1:ncol(masterData)){
if(grepl("MAXN", colnames(masterData[j]))){
masterData[j][is.na(masterData[j])] <- 0
}}
#View(masterData)
write.csv(masterData, "Master_RecordingData.csv")
URUV_data <- masterData
combineSpecies <- function(NAME1, NAME2, NEWNAME) {
# NAME1 <- "FISHF"
# NAME2 <- "GUPPYC"
# NEWNAME <- "FISHF"
SPECIES_Compare <- URUV_data %>%
select(contains(NAME1) | contains(NAME2))
# Remove these columns from original dataset
NEW_URUV <- URUV_data[,!names(URUV_data) %in% colnames(SPECIES_Compare)]
MAXN_cols <- grep("MAXN", names(SPECIES_Compare), value = TRUE)
# CALCULATE NEW MAXN
SPECIES_Compare <- pmax(SPECIES_Compare[MAXN_cols[1]], SPECIES_Compare[MAXN_cols[2]])
colnames(SPECIES_Compare) <- paste0("MAXN_", NEWNAME)
#APPEND TO DATASET AND REPLACE
NEW_URUV <- cbind(NEW_URUV, SPECIES_Compare)
URUV_data <<- NEW_URUV
}
#NOTE: IF YOU USE T1 YOU HAVE TO CONVERT ALL OF THE TIME COLUMNS INTO TIME FORMATS. FIX FUNCTION ABOVE AS WELL TO CREATE SMALLER T1 VALUES
URUV_data$DATE <- as.Date(URUV_data$DATE, format = "%d/%m/%Y")
URUV_data <- URUV_data %>% #Take out unused videos
rowwise() %>%
mutate(WATER_DEPTH_AVERAGE = mean(c(WATER_DEPTH_BEFORE, WATER_DEPTH_AFTER), na.rm=TRUE)) #Take avg depth during recording
#View(URUV_data)
# COMBINING SPECIES ORIGINALLY SEPARATED IN DATA
combineSpecies("FISHF", "GUPPYC", "FISHF")
combineSpecies("FISHM", "FISHG", "FISHM")
combineSpecies("FISHL", "FISHK", "FISHK")
colnames(URUV_data)
# Sample data: species counts
species_counts <- c(10, 20, 30, 40)
# Calculate proportions
species_proportions <- species_counts / sum(species_counts)
species_proportions
colname(URUV_data)
colnames(URUV_data)
i <- 5
species_counts <- c()
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & !grepl(dontInclude, colnames[URUV_data[j]]) & URUV_data[i,j] > 0){
species_counts[j] <-URUV_data[i,j]
}
species_counts
d
species_counts <- c()
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & !grepl(dontInclude, colnames[URUV_data[j]]) & URUV_data[i,j] > 0){
species_counts[j] <-URUV_data[i,j]
}
}
species_counts <- c()
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & !grepl(dontInclude, colnames[URUV_data[j])) & URUV_data[i,j] > 0){
species_counts <- c()
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & URUV_data[i,j] > 0){
species_counts[j] <-URUV_data[i,j]
}
}
species_counts
dontInclude <- c("UNIDGUPPY")
for(i in 1:nrow(URUV_data)){
species_counts <- c()
k <- 1
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & URUV_data[i,j] > 0){
species_counts[k] <-URUV_data[i,j]
k <- k+1
}
}
i <- 5
species_counts <- c()
k <- 1
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & URUV_data[i,j] > 0){
species_counts[k] <-URUV_data[i,j]
k <- k+1
}
}
species_counts
for(i in 1:nrow(URUV_data)){
species_counts <- c()
k <- 1
for(j in 1:ncol(URUV_data)){
if(grepl("MAXN", colnames(URUV_data[j])) & URUV_data[i,j] > 0){
species_counts[k] <-URUV_data[i,j]
k <- k+1
}
}
species_proportions <- species_counts / sum(species_counts)
shannon_diversity <- -sum(species_proportions * log(species_proportions))
URUV_data$SHANNON_DIV[i] <- shannon_diversity
}
shannon <- URUV_data %>%
group_by(SITE_TYPE) %>%
summarise(SHANNON_AVG = mean(SHANNON_DIV))
ggplot(data=shannon, aes(x=SITE_TYPE, y=SHANNON_AVG, fill = SITE_TYPE)) +
geom_bar(stat="identity", color = "black") +
xlab("Jenis Mangrove") +
ylab(paste("Index", Yaxistitle)) +
geom_text(aes(label=SHANNON_AVG), vjust=-0.3, size=3.5) +
theme_minimal() +
scale_fill_manual(values = c("#b41515", "#ffff00", "#0474c4"),
labels = c("Dihancur","EMR", "Alami")) +
theme(legend.title=element_blank())
ggplot(data=shannon, aes(x=SITE_TYPE, y=SHANNON_AVG, fill = SITE_TYPE)) +
geom_bar(stat="identity", color = "black") +
xlab("Jenis Mangrove") +
ylab("Index") +
geom_text(aes(label=SHANNON_AVG), vjust=-0.3, size=3.5) +
theme_minimal() +
scale_fill_manual(values = c("#b41515", "#ffff00", "#0474c4"),
labels = c("Dihancur","EMR", "Alami")) +
theme(legend.title=element_blank())
